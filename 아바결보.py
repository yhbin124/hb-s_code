import streamlit as st #ì™¸ë¶€ í”„ë¡œê·¸ë¨ ë¶ˆëŸ¬ì˜¤ê¸°
#ì»´í“¨í„°ì— pythonì„ ì„¤ì¹˜í•œ ìƒíƒœì—ì„œ
#ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ CMD ì‹¤í–‰
#pip install streamlit ì…ë ¥ ë° ì—”í„°
#cmdì— "run streamlit (íŒŒì¼ìœ„ì¹˜)" ì…ë ¥
# #ì´ í”„ë¡œê·¸ë¨ ì‹¤í–‰ì„ ìœ„í•´ì„œëŠ” pythonì´ ì•„ë‹ˆë¼ cmdë¥¼ í†µí•´ runì‹œì¼œì•¼í•¨
#https://hb-scode-35df.streamlit.app/
recommended_books = {
    "STJ": ["ì¼ ì˜í•˜ëŠ” ì‚¬ëŒì€ ë‹¨ìˆœí•˜ê²Œ í•©ë‹ˆë‹¤", "ê·¸ë¦¿"],
    "SFJ": ["ë‚˜ëŠ” ë‚˜ë¡œ ì‚´ê¸°ë¡œ í–ˆë‹¤", "ë§ ê·¸ë¦‡"],
    "SFP": ["ì‹œì„ ìœ¼ë¡œë¶€í„°,", "ëª¨ë“  ìˆœê°„ì´ ë„ˆì˜€ë‹¤"],
    "STP": ["ì´ˆì§‘ì¤‘", "í–‰ë™ì˜ ê¸°ìˆ "],
    "NFJ": ["ì–´ë¥¸ì˜ ë¬¸ë‹µë²•", "ë‚˜ëŠ” ìƒê°ì´ ë„ˆë¬´ ë§ì•„"],
    "NFP": ["ì£½ê³  ì‹¶ì§€ë§Œ ë–¡ë³¶ì´ëŠ” ë¨¹ê³  ì‹¶ì–´", "ìš°ë¦¬ëŠ” ëª¨ë‘ ì¡°ê¸ˆ ì´ìƒí•˜ë‹¤"],
    "NTJ": ["ì‚¬í”¼ì—”ìŠ¤", "ë¦¬ë”ì˜ ì¡°ê±´"],
    "NTP": ["ë…¼ë¦¬ì˜ ê¸°ìˆ ", "ë¯¸ì›€ë°›ì„ ìš©ê¸°"]
} #ë„ì„œ ì¶”ì²œ ëª©ë¡
questionsE = [
    "ë‚˜ëŠ” ì±…ì„ ê³ ë¥¼ ë•Œ ì¥ë¥´ë‚˜ ë¶„ì•¼ë¥¼ ë”°ì§€ì§€ ì•Šê³  í¥ë¯¸ê°€ ê°€ëŠ” ëŒ€ë¡œ ì„ íƒí•œë‹¤.", #E
    "ìƒˆë¡œìš´ ì±…ì„ ì½ë‹¤ í¥ë¯¸ ìˆëŠ” ë‚´ìš©ì´ ë‚˜ì˜¤ë©´ ê´€ë ¨ëœ ë‹¤ë¥¸ ë¶„ì•¼ì˜ ì±…ë„ ì°¾ì•„ë³¸ë‹¤.",#E
    "ì„œì ì´ë‚˜ ë„ì„œê´€ì„ ë°©ë¬¸í•˜ë©´ ì—¬ëŸ¬ ì½”ë„ˆë¥¼ ëŒì•„ë‹¤ë‹ˆë©° ë‹¤ì–‘í•œ ì±…ì„ ì‚´í´ë³¸ë‹¤.", #E
    "ì±… í•œ ê¶Œì„ ì½ê³  ë‚˜ë©´ ì „í˜€ ë‹¤ë¥¸ ìŠ¤íƒ€ì¼ì˜ ì±…ì„ ì„ íƒí•´ ê¸°ë¶„ì„ ì „í™˜í•˜ëŠ” í¸ì´ë‹¤.",#E
    "ìƒˆë¡œìš´ ì¶”ì²œ ë„ì„œê°€ ë“¤ì–´ì˜¤ë©´ ê´€ì‹¬ ë¶„ì•¼ê°€ ì•„ë‹ˆì–´ë„ ì¼ë‹¨ ì‹œë„í•´ ë³¸ë‹¤.",#E
]
questionsI = [
    "ë…ì„œ ì¤‘ì— ë‚˜ì˜¤ëŠ” ìƒˆë¡œìš´ ê°œë…ì´ë‚˜ ì •ë³´ëŠ” ê¹Šê²Œ íŒŒê³ ë“¤ê¸°ë³´ë‹¤ ëŒ€ëµì ì¸ ì´í•´ë¡œ ë„˜ì–´ê°„ë‹¤.",
    "ë‚˜ëŠ” ì—¬ëŸ¬ ì¥ë¥´ë¥¼ â€˜ì–•ê³  ë„“ê²Œâ€™ ê²½í—˜í•˜ëŠ” ê²ƒì´ í•œ ì¥ë¥´ë¥¼ ê¹Šê²Œ íŒŒëŠ” ê²ƒë³´ë‹¤ ë” ì¦ê²ë‹¤.",
    "ë…ì„œ ëª¨ì„ì—ì„œ ì—¬ëŸ¬ ì±…ì— ëŒ€í•´ ê°€ë³ê²Œ ì´ì•¼ê¸°í•˜ëŠ” ì‹œê°„ì´ ë” í¥ë¯¸ë¡­ë‹¤.",
    "ì±…ì„ ì„ íƒí•  ë•Œ â€˜ìƒˆë¡­ê³  ì‹ ì„ í•œ ê²½í—˜ì„ ì¤„ ìˆ˜ ìˆëŠ”ê°€?â€™ê°€ ê°€ì¥ ì¤‘ìš”í•œ ê¸°ì¤€ì´ë‹¤.",
    "ë‚˜ëŠ” ë…ì„œë¥¼ í†µí•´ í•œ ë¶„ì•¼ë¥¼ ê¹Šì´ ì´í•´í•˜ê¸°ë³´ë‹¤ ë‹¤ì–‘í•œ ì„¸ê³„ë¥¼ ê²½í—˜í•˜ê³  ì‹¶ë‹¤."
]

questionsN =[
    "ë‚´ìš©ì´ ì „ë¶€ ê¸°ì–µë‚˜ëŠ” ì±…ì´ë¼ë„ ì¬ë¯¸ìˆì–´ì„œ ê±°ë“­ ì½ê³ ëŠ” í•œë‹¤.",
    "ë‚´ê°€ ì½ëŠ” ì±…ì€ ëŒ€ì²´ë¡œ ì†Œì„¤, ì—ì„¸ì´ì²˜ëŸ¼ ì´ì•¼ê¸°ê°€ ìˆëŠ” ì±…ì´ë‹¤.",
    "ì±… ì† ì„¸ê³„ì— ë¹ ì ¸ í˜„ì‹¤ì„ ì ì‹œ ìŠëŠ” ëŠë‚Œì´ ì¢‹ë‹¤.",
    "ì±…ì„ ì½ì„ ë•Œ ì¤„ê±°ë¦¬ë‚˜ ì¸ë¬¼ì˜ ê°ì • ë³€í™”ì— ëª°ì…í•˜ëŠ” í¸ì´ë‹¤.",
    "ì±…ì„ ë‹¤ ì½ì€ ë’¤, ë‚´ìš©ë³´ë‹¤ëŠ” ì¸ìƒì ì¸ ì¥ë©´ì´ë‚˜ ë¬¸ì¥ì´ ê¸°ì–µì— ì˜¤ë˜ ë‚¨ëŠ”ë‹¤.",#N
]
questionsS =[
    "ì±…ì„ ì½ìœ¼ë©´ì„œ â€˜ì´ê±´ ë‚˜ì¤‘ì— ì¨ë¨¹ì–´ì•¼ê² ë‹¤â€™ëŠ” ìƒê°ì„ ìì£¼ í•œë‹¤.",
    "ì±…ì„ ì½ëŠ” ëª©ì ì€ ìƒˆë¡œìš´ ì§€ì‹ì´ë‚˜ ì •ë³´ë¥¼ ì–»ê¸° ìœ„í•´ì„œì´ë‹¤.",
    "ì±…ì„ ì½ëŠ” ê²ƒì€ ë‚˜ì—ê²Œ íœ´ì‹ë³´ë‹¤ëŠ” ìê¸°ê³„ë°œì˜ ì‹œê°„ì´ë‹¤.",
    "ëª¨ë¥´ëŠ” ë‹¨ì–´ë‚˜ ê°œë…ì´ ì±…ì—ì„œ ë‚˜ì˜¤ë©´ ë°˜ë“œì‹œ ì°¾ì•„ë³´ê³  ë„˜ì–´ê°„ë‹¤.",
    "êµ¬ì…í•œ ì±…ì„ ì½ëŠ” ë™ì•ˆ ë°‘ì¤„ì„ ì¹˜ê±°ë‚˜ ë©”ëª¨ë¥¼ ìì£¼ í•œë‹¤."
]

questionsF = [
    "ì±…ì„ ì½ìœ¼ë©° ë‚´ ì‚¶ì´ë‚˜ ê°ì •ì„ ëŒì•„ë³´ê²Œ ë˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.",
    "ì½ì€ ë‚´ìš©ì„ ë¶„ì„í•˜ê¸°ë³´ë‹¤ëŠ” ëŠë‚€ ì ì´ë‚˜ ì¸ìƒì— ì§‘ì¤‘í•œë‹¤.",
    "ì±…ì„ í†µí•´ ì¸ê°„ì˜ ë³¸ì„±ì´ë‚˜ ì‚¶ì˜ ì˜ë¯¸ë¥¼ ìƒê°í•œë‹¤.",
    "ì±…ì„ ì½ì„ ë•Œ êµ¬ì²´ì ì¸ ì‚¬ì‹¤ì´ë‚˜ ì •ë³´ë¥¼ ì–»ëŠ” ë° ì¤‘ì ì„ ë‘”ë‹¤.",
    "ë‚´ìš©ì„ ì´í•´í•˜ëŠ” ê²ƒì— ì§‘ì¤‘í•œë‹¤.", #F
]
questionsT =[
    "ì±…ì„ í†µí•´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê±°ë‚˜ ì‹¤ìƒí™œì— ì ìš©í•  ìˆ˜ ìˆëŠ” ì§€ì‹ì„ ì–»ê³ ì í•œë‹¤.",
    "ë…¼ë¦¬ì ì´ê³  ì²´ê³„ì ì¸ ì„¤ëª…ì´ ë‹´ê¸´ ê¸€ì„ ì„ í˜¸í•œë‹¤.",
    "ì €ìì˜ ì£¼ì¥ê³¼ ê·¼ê±°ê°€ ë…¼ë¦¬ì ìœ¼ë¡œ íƒ€ë‹¹í•œì§€ ì‚´í´ë³¸ë‹¤.",
    "ì±…ì„ ì½ì„ ë•Œ ê¸°ë¶„ë³´ë‹¤ëŠ” ë‚´ìš©ì„ ì¤‘ìš”ì‹œí•œë‹¤.",
    "ì±…ì— ë©”ì‹œì§€ë‚˜ ì£¼ì œê°€ ì—†ë‹¤ë©´ ì½ì§€ ì•ŠëŠ” í¸ì´ë‹¤."
]

questionsJ =[
    "ë‚˜ëŠ” ì±…ì„ ì½ê¸° ì „ì— ì½ì„ ë¶„ëŸ‰ê³¼ ì¼ì •ì„ ë¯¸ë¦¬ ì •í•´ë‘ëŠ” í¸ì´ë‹¤.",
    "ì½ê³  ì‹¶ì€ ì±…ì´ ìƒê¸°ë©´ í˜„ì¬ ì½ëŠ” ì±…ì„ ë§ˆë¬´ë¦¬í•œ í›„ ìƒˆ ì±…ì„ ì‹œì‘í•œë‹¤.",
    "ì±…ì„ ì½ì„ ë•ŒëŠ” ì±…ê°ˆí”¼ë‚˜ ë©”ëª¨ë¥¼ ì²´ê³„ì ìœ¼ë¡œ í™œìš©í•œë‹¤.",
    "ë…ì„œ ì¤‘ í¥ë¯¸ê°€ ë–¨ì–´ì ¸ë„ ëê¹Œì§€ ì™„ë…í•˜ë ¤ê³  ë…¸ë ¥í•œë‹¤.",
    "ë‚˜ëŠ” ì •í•´ì§„ ì‹œê°„(ì˜ˆ: ìê¸° ì „, ì£¼ë§ ì˜¤ì „)ì— ì±…ì„ ì½ëŠ” ìŠµê´€ì´ ìˆë‹¤.", #J
]
questionsP=[
    "ì„œì ì´ë‚˜ ë„ì„œê´€ì— ê°€ë©´ ê³„íš ì—†ì´ ì¦‰í¥ì ìœ¼ë¡œ ì±…ì„ ê³ ë¥´ëŠ” ê²½ìš°ê°€ ë§ë‹¤.",
    "ì½ë‹¤ ë³´ë©´ ê·¸ë•Œê·¸ë•Œ ê¸°ë¶„ì— ë”°ë¼ ë‹¤ë¥¸ ì±…ìœ¼ë¡œ ë°”ê¾¸ëŠ” ì¼ì´ ìì£¼ ìˆë‹¤.",
    "ì±…ì„ ì½ì„ ë•ŒëŠ” ì¤„ê±°ë¦¬ë‚˜ ëª©ì°¨ë¥¼ ë¯¸ë¦¬ í™•ì¸í•˜ì§€ ì•Šê³  ë°”ë¡œ ë³¸ë¬¸ë¶€í„° ì½ëŠ”ë‹¤.",
    "ë…ì„œ ëª©í‘œë¥¼ ì„¸ì›Œë„ ì¤‘ê°„ì— ë‹¤ë¥¸ í¥ë¯¸ë¡œìš´ ì±…ìœ¼ë¡œ ê°ˆì•„íƒ€ëŠ” ê²½ìš°ê°€ ë§ë‹¤.",
    "ë‚˜ëŠ” ë…ì„œ ê³„íšë³´ë‹¤ëŠ” ìˆœê°„ì˜ í¥ë¯¸ë‚˜ ì§ê°ì„ ë” ì¤‘ìš”í•˜ê²Œ ìƒê°í•œë‹¤."
]

# ìƒíƒœ ì´ˆê¸°í™”
if "page" not in st.session_state:
    st.session_state.page = "E" #ì‹œì‘ í˜ì´ì§€ E
for trait in ["EI", "NS", "FT", "JP"]: #ì˜ì—­ë³„ ê²°ê³¼ê°’ ì •ì˜
    if trait not in st.session_state:
        st.session_state[trait] = 0
if "responses" not in st.session_state:#ì‘ë‹µê°’ ì •ì˜
    st.session_state.responses = {}
EI=0 #ë³€ìˆ˜ ì„ ì–¸
NS=0
FT=0
JP=0

# í˜ì´ì§€ ì „í™˜ í•¨ìˆ˜
def go_to(page_name):
    st.session_state.page = page_name



# --- IE ---
if st.session_state.page == "E": #í˜ì´ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
    st.title("ë…ì„œ ìœ í˜• ê²€ì‚¬ ğŸ“š") #í˜ì´ì§€ ì œëª©
    for i, q in enumerate(questionsE, 1):#ë¦¬ìŠ¤íŠ¸ì—ì„œ ë¬¸í•­ ë°›ì•„ì˜¤ê¸°
        response1 = st.radio(q, [1, 2, 3, 4, 5], horizontal=True, key=f"E{i}")#ì„ íƒì°½ ë„ìš°ê³  ê°’ ë°›ê¸°
        EI += response1 #ê°’ ëˆ„ì 
    for i, q in enumerate(questionsI, 1):
        response2 = st.radio(q, [1, 2, 3, 4, 5], horizontal=True, key=f"I{i}")
        EI += (6 - response2)
    st.session_state.EI= EI #ê°’ ì •ë¦¬
    st.button("ë‹¤ìŒ ì„¹ì…˜ìœ¼ë¡œ ì´ë™", on_click=lambda: go_to("NS")) #ë‹¤ìŒí˜ì´ì§€ ì´ë™


# --- NS ---
elif st.session_state.page == "NS":
    st.title('page 2')
    for i, q in enumerate(questionsN, 1):
        response = st.radio(q, [1, 2, 3, 4, 5], horizontal=True, key=f"N{i}")
        NS += response
    for i, q in enumerate(questionsS, 1):
        response = st.radio(q, [1, 2, 3, 4, 5], horizontal=True, key=f"S{i}")
        NS += (6 - response)
    st.session_state.NS = NS
    st.button("ë‹¤ìŒ ì„¹ì…˜ìœ¼ë¡œ ì´ë™", on_click=lambda: go_to("FT"))



# --- FT ---
elif st.session_state.page == "FT":
    st.title('page 3')
    for i, q in enumerate(questionsF, 1):
        response = st.radio(q, [1, 2, 3, 4, 5], horizontal=True, key=f"F{i}")
        FT += response
    for i, q in enumerate(questionsT, 1):
        response = st.radio(q, [1, 2, 3, 4, 5], horizontal=True, key=f"T{i}")
        FT += (6 - response)
    st.session_state.FT=FT
    st.button("ë‹¤ìŒ ì„¹ì…˜ìœ¼ë¡œ ì´ë™", on_click=lambda: go_to("JP"))




# --- JP ---
elif st.session_state.page == "JP":
    st.title('page 4')
    for i, q in enumerate(questionsJ, 1):
        response = st.radio(q, [1, 2, 3, 4, 5], horizontal=True, key=f"J{i}")
        JP += response
    for i, q in enumerate(questionsP, 1):
        response = st.radio(q, [1, 2, 3, 4, 5], horizontal=True, key=f"P{i}")
        JP += (6 - response)
    st.session_state.JP=JP
    st.button("ì œì¶œ", on_click=lambda: go_to("RESULT"))





elif st.session_state.page == "RESULT":
    s1 = st.session_state.EI #ê°’ ì¬ì •ì˜
    s2 = st.session_state.NS
    s3 = st.session_state.FT
    s4 = st.session_state.JP
    ss1= int(s1/6*10)#ë¹„ìœ¨ í‘œì‹œ ìœ„í•¨
    ss2= int(s2/6*10)
    ss3= int(s3/6*10)
    ss4= int(s4/6*10)

    ei_type = "E" if s1 >= (60 - s1) else "I"# ë¹„êµë¥¼ í†µí•œ ìš°ìœ„ í•­ëª© ì„ íƒ
    ns_type = "N" if s2 >= (60 - s2) else "S"
    ft_type = "F" if s3 >= (60 - s3) else "T"
    jp_type = "J" if s4 >= (60 - s4) else "P"
    mbti_result = ei_type + ns_type + ft_type + jp_type #ë…ì„œì„±í–¥ ì •ì˜
    book_recommend = ns_type + ft_type + jp_type #ë„ì„œ ì¶”ì²œ ìš© ë…ì„œì„±í–¥
    result = "/ ".join(recommended_books[book_recommend])

    st.title("ğŸ“Š ê²°ê³¼ í˜ì´ì§€")
    st.success("ì‘ë‹µì´ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤!")
    st.write("ë‹¹ì‹ ì˜ ì‘ë‹µ ê²°ê³¼:")
    st.write("ë‹¹ì‹ ì˜ ë…ì„œì„±í–¥ ìœ í˜•ì€:", f"**{mbti_result}**")
    st.write("ë‹¤ìŒì€ ì¶”ì²œ ë„ì„œ ëª©ë¡ì…ë‹ˆë‹¤!")
    st.write(result)
    st.write("ê¼­ í•œ ë²ˆ ì½ì–´ë´ì£¼ì„¸ìš”")
    st.write()
    st.write(f"E(  ì—¬ëŸ¬ì±…  ) = {ss1} : I(  í•œ ì±…  ) = {100 - ss1}")
    st.write(f"N(í¥ë¯¸ ìœ„ì£¼) = {ss2} : S(ê¹¨ë‹¬ìŒ ìœ„ì£¼) = {100 - ss2}")
    st.write(f"F(ê°ì„±ì ) = {ss3} : T(ì§€ì‹ì ) = {100- ss3}")
    st.write(f"J(ë‘êº¼ìš´ ì±…) = {ss4} : P(ì–‡ì€ ì±…) = {100- ss4}")

    #ìµœëŒ€ì ìˆ˜ 50 ìµœì €ì ìˆ˜ 10




